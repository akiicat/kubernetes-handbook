# Service Mesh

Service Mesh（服務網格）是一個用於保證服務間安全、快速、可靠通信的網絡代理組件，是隨著微服務和雲原生應用興起而誕生的基礎設施層。它通常以輕量級網絡代理的方式同應用部署在一起（比如sidecar方式，如下圖所示）。Serivce Mesh可以看作是一個位於TCP/IP之上的網絡模型，抽象了服務間可靠通信的機制。但與TCP不同，它是面向應用的，為應用提供了統一的可視化和控制。

![](images/pattern-service-mesh.png)

為了保證服務間通信的可靠性，Service Mesh需要支持熔斷機制、延遲感知的負載均衡、服務發現、重試等一些列的特性。比如Linkerd處理一個請求的流程包括

- 查找動態路由確定請求的服務
- 查找該服務的實例
- Linkerd跟響應延遲等因素選擇最優的實例
- 將請求轉發給最優實例，記錄延遲和響應情況
- 如果請求失敗或實例實效，則轉發給其他實例重試（需要是冪等請求）
- 如果請求超時，則直接失敗，避免給後端增加更多的負載
- 記錄請求的度量和分佈式跟蹤情況

為什麼Service Mesh是必要的

- 將服務治理與實際服務解耦，避免微服務化過程中對應用的侵入
- 加速傳統應用轉型微服務或雲原生應用

Service Mesh並非一個全新的功能，而是將已存在於眾多應用之中的相關功能分離出來，放到統一的組件來管理。特別是在微服務應用中，服務數量龐大，並且可能是基於不同的框架和語言構建，分離出來的Service Mesh組件更容易管理和協調它們。

常見的 Service Mesh 框架包括

- [Istio](istio.md)
- [Conduit](conduit.md)
- [Linkerd](linkerd.md)

